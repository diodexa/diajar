// scroll 
window.addEventListener('scroll', () => {
        const scrollY = window.scrollY;
        document.querySelector('.flowers').style.backgroundPosition =
            `${-70}px ${scrollY * 0.5}px, calc(100% + 70px) ${scrollY * 0.5}px`;
    });

// buka undangan

const rootElement = document.querySelector(":root");
const audioiconwrapper = document.querySelector('.audio-icon-wrapper');
const audioIcon = document.querySelector('.audio-icon-wrapper i')
const song = document.querySelector ('#song') ;
const isScroll = document.querySelector('.flowers');
const awal = document.getElementById('hero');
let isPlaying = false;


function disableScroll() {
const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft;

window.onscroll = function () {
window.scrollTo(scrollTop, scrollLeft);
}


rootElement.style.scrollBehavior = 'auto';
}

function enableScroll() {
  window.onscroll = function () {};
  rootElement.style.scrollBehavior = "smooth";
  playAudio();

  // efek hero hilang dulu
  const hero = document.getElementById("hero");
  hero.classList.add("fade-out");

  // setelah transisi hero selesai, baru remove dan munculkan bunga
  setTimeout(() => {
    hero.remove();

    const flowers = document.querySelector(".flowers");
    const bismillah = document.querySelector(".homeh2");
    const h3 = document.querySelector(".homeh3");
    const Wanita = document.getElementById("perempuan");
    const Pria = document.getElementById("laki-laki");
    flowers.classList.add("show");
    bismillah.classList.add("show");
    h3.classList.add("show");
    Wanita.classList.add("show");
    Pria.classList.add("show");
}, 1000); // delay sama dengan durasi fade-out css hero
}



function playAudio() {

song.volume = 0.1;
audioiconwrapper.style.display = 'flex';
song.play();
isPlaying = true;
}

audioiconwrapper.onclick = function() {
if (isPlaying) {
    song.pause();
    audioIcon.classList.remove('bi-disc');
    audioIcon.classList.add('bi-pause-circle');
} else{
    song.play();
    audioIcon.classList.add('bi-disc');
    audioIcon.classList.remove('bi-pause-circle');
}

isPlaying = !isPlaying;
}

disableScroll();

// form
window.addEventListener("load", function() {
const form = document.getElementById('my-form');
form.addEventListener("submit", function(e) {
e.preventDefault();
const data = new FormData(form);
const action = e.target.action;
fetch(action, {
    method: 'POST',
    body: data,
})
.then(() => {
    alert("Terima kasih udah konfirmasi!");
})
});
});

// hero nama

const urlParams = new URLSearchParams(window.location.search);
const nama = urlParams.get('n') || '';
const pronoun = urlParams.get('p') || 'Bapak/Ibu/Saudara/i';

const namaContainer = document.querySelector('.hero h2');
namaContainer.innerText = `${pronoun} ${nama}`.replace(/,$/,',')


// Daftarkan plugin ScrollTrigger
gsap.registerPlugin(ScrollTrigger);

gsap.from(".ayat h3", {
  y: 100,
  scale: 0.3,
  opacity: 0,
  duration: 1,
  scrollTrigger: {
    trigger: ".ayat h3",
    start: "top 70%",
    end: "top 5%",
    scrub: true // kalau mau smooth ikutin scroll
    // toggleActions: "play none none reverse" // kalau mau sekali main balik
  }
});



// Animasi untuk Informasi Acara saat masuk ke dalam viewport
